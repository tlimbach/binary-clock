<html>
    <head>
		<meta name="viewport" content = "width = device-width, initial-scale = 1.0, minimum-scale = 1, maximum-scale = 1, user-scalable = no" />
		<meta name="apple-mobile-web-app-title" content="Binary Clock" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		
		
    </head>

    <body onload="showClock()">
        <div id="grid-container"></div>
    </body>

    <script>
        
        function showClock() {
        
            var container = document.getElementById("grid-container");
            
            for (var row = 0; row < 4; row++) {
                for (var col = 0; col < 6; col++) {
                    var iDiv = document.createElement('div');
                    iDiv.id = (col+1)+"_"+(row+1);
                    iDiv.className = 'block';
                    container.appendChild(iDiv);
                }
            }
            
            updateClock();
            
        }
        
        function drawLetter(letter, col) {
                        
            for (var row = 0; row < 4; row++) {
            
                    var divId = (col+1)+"_"+(row+1);
                    var field = document.getElementById(divId);
                    
                    val = Math.pow(2,(3-row));
                                        
                    if (letter>=val) {
                        letter -= val;
                        field.style.backgroundColor = getRandomColorSaturated(85);
                    } else {
                        field.style.backgroundColor = "#111";
                    }
            }
            
        }
        
        function updateClock() {
        
            var time = getTimeString();
            
            for (var col=0; col<6; col++) {
                var letter = time.charAt(col);
                drawLetter(letter, col);
            }
            
            setTimeout(updateClock, 1000);
        
        }
        function getTimeString() {
            var date = new Date();
            
            hours = ""+date.getHours();
            minutes = ""+date.getMinutes();
            sec = ""+date.getSeconds();
            
            while (hours.length<2) {
                hours ="0"+hours;
            }
            
            while (minutes.length<2) {
                minutes ="0"+minutes;
            }
            
            while (sec.length<2) {
                sec ="0"+sec;
            }
            
            return hours+minutes+sec;
        }
        
        
        function getRandomColorSaturated(saturation) {
            var letters = '789abcdef';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * letters.length)];
            }
            var newColor = applySaturationToHexColor(color, 85);
           
            return newColor;
        }
        
        
        function applySaturationToHexColor(hex, saturationPercent) {
            if (!/^#([0-9a-f]{6})$/i.test(hex)) {
                throw ('Unexpected color format: >' + hex + '<');
            }

            if (saturationPercent < 0 || saturationPercent > 100) {
                throw ('Unexpected saturation: >' + saturationPercent + '<');
            }

            var saturationFloat = saturationPercent / 100,
                rgbIntensityFloat = [parseInt(hex.substr(1, 2), 16) / 255, parseInt(hex.substr(3, 2), 16) / 255, parseInt(hex.substr(5, 2), 16) / 255];

            var rgbIntensityFloatSorted = rgbIntensityFloat.slice(0).sort(function(a, b) {
                return a - b;
            }),
                maxIntensityFloat = rgbIntensityFloatSorted[2],
                mediumIntensityFloat = rgbIntensityFloatSorted[1],
                minIntensityFloat = rgbIntensityFloatSorted[0];

            if (maxIntensityFloat == minIntensityFloat) {
                // All colors have same intensity, which means
                // the original color is gray, so we can't change saturation.
                return hex;
            }

            // New color max intensity wont change. Lets find medium and weak intensities.
            var newMediumIntensityFloat,
                newMinIntensityFloat = maxIntensityFloat * (1 - saturationFloat);

            if (mediumIntensityFloat == minIntensityFloat) {
                // Weak colors have equal intensity.
                newMediumIntensityFloat = newMinIntensityFloat;
            } else {
                // Calculate medium intensity with respect to original intensity proportion.
                var intensityProportion = (maxIntensityFloat - mediumIntensityFloat) / (mediumIntensityFloat - minIntensityFloat);
                newMediumIntensityFloat = (intensityProportion * newMinIntensityFloat + maxIntensityFloat) / (intensityProportion + 1);
            }

            var newRgbIntensityFloat = [],
                newRgbIntensityFloatSorted = [newMinIntensityFloat, newMediumIntensityFloat, maxIntensityFloat];

            // We've found new intensities, but we have then sorted from min to max.
            // Now we have to restore original order.
            rgbIntensityFloat.forEach(function(originalRgb) {
                var rgbSortedIndex = rgbIntensityFloatSorted.indexOf(originalRgb);
                newRgbIntensityFloat.push(newRgbIntensityFloatSorted[rgbSortedIndex]);
            });

            var floatToHex = function(val) {
                return ('0' + Math.round(val * 255).toString(16)).substr(-2);
            },
                rgb2hex = function(rgb) {
                return '#' + floatToHex(rgb[0]) + floatToHex(rgb[1]) + floatToHex(rgb[2]);
            };

            return rgb2hex(newRgbIntensityFloat);
        }


    </script>
    <style>
        * {
            padding: 0;
            margin: 0;
            overflow: visible;
            width:100%;
            height:100%;
            box-sizing: border-box;
            background-color:black;
        }
       
        .block {
            border-radius: 10px 10px;
             -webkit-transition: background-color 400ms linear;
    		-ms-transition: background-color 400ms linear;
    		transition: background-color 300ms linear;
        }
        #grid-container {
                        border: 10px solid black;
                        grid-gap: 10px;
                        display: grid;
                        grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;
                        grid-template-rows: 1fr 1fr 1fr 1fr;
                        grid-template-areas: ". . . . . ." ". . . . . ." ". . . . . ." ". . . . . .";
                }
    </style>
</html>